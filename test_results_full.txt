[1m============================= test session starts =============================[0m
platform win32 -- Python 3.13.9, pytest-7.4.3, pluggy-1.6.0 -- D:\dev\AI_Podcast_Creator\venv\Scripts\python.exe
cachedir: .pytest_cache
hypothesis profile 'default' -> database=DirectoryBasedExampleDatabase(WindowsPath('D:/dev/AI_Podcast_Creator/.hypothesis/examples'))
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: D:\dev\AI_Podcast_Creator
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.11.0, Faker-22.0.0, hypothesis-6.96.0, asyncio-0.21.1, benchmark-4.0.0, cov-4.1.0, factoryboy-2.6.0, mock-3.12.0, timeout-2.2.0, xdist-3.5.0
asyncio: mode=Mode.STRICT
[1mcollecting ... [0mcollected 370 items

tests/test_script_parser.py::test_parse_simple_script [32mPASSED[0m[33m             [  0%][0m
tests/test_script_parser.py::test_parse_with_music_cues [32mPASSED[0m[33m           [  0%][0m
tests/test_script_parser.py::test_validate_empty_script [32mPASSED[0m[33m           [  0%][0m
tests/test_script_parser.py::test_validate_long_script [32mPASSED[0m[33m            [  1%][0m
tests/e2e/test_complete_workflows.py::TestCompleteWorkflows::test_text_to_audio_workflow [32mPASSED[0m[33m [  1%][0m
tests/e2e/test_complete_workflows.py::TestCompleteWorkflows::test_script_with_music_cues_workflow [32mPASSED[0m[33m [  1%][0m
tests/e2e/test_complete_workflows.py::TestCompleteWorkflows::test_audio_to_video_workflow [31mFAILED[0m[31m [  1%][0m
tests/e2e/test_complete_workflows.py::TestCompleteWorkflows::test_full_podcast_creation_workflow [31mFAILED[0m[31m [  2%][0m
tests/e2e/test_complete_workflows.py::TestCompleteWorkflows::test_multiple_podcasts_workflow [31mFAILED[0m[31m [  2%][0m
tests/e2e/test_complete_workflows.py::TestErrorRecoveryWorkflows::test_invalid_script_handling [31mFAILED[0m[31m [  2%][0m
tests/e2e/test_complete_workflows.py::TestErrorRecoveryWorkflows::test_tts_failure_recovery [32mPASSED[0m[31m [  2%][0m
tests/e2e/test_complete_workflows.py::TestErrorRecoveryWorkflows::test_missing_audio_file_handling [32mPASSED[0m[31m [  3%][0m
tests/e2e/test_complete_workflows.py::TestPerformanceWorkflows::test_caching_improves_performance [32mPASSED[0m[31m [  3%][0m
tests/e2e/test_complete_workflows.py::TestPerformanceWorkflows::test_batch_processing_workflow [32mPASSED[0m[31m [  3%][0m
tests/e2e/test_complete_workflows.py::TestConfigurationWorkflows::test_different_resolutions_workflow [31mFAILED[0m[31m [  4%][0m

================================== FAILURES ===================================
[31m[1m_____________ TestCompleteWorkflows.test_audio_to_video_workflow ______________[0m
[1m[31mtests\e2e\test_complete_workflows.py[0m:99: in test_audio_to_video_workflow
    [94mwith[39;49;00m patch([33m'[39;49;00m[33msrc.core.video_composer.AudioFileClip[39;49;00m[33m'[39;49;00m, return_value=mock_audio):[90m[39;49;00m
[1m[31mC:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2544.0_x64__qbz5n2kfra8p0\Lib\unittest\mock.py[0m:1497: in __enter__
    original, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
[1m[31mC:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2544.0_x64__qbz5n2kfra8p0\Lib\unittest\mock.py[0m:1467: in get_original
    [94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.core.video_composer' from 'D:\\dev\\AI_Podcast_Creator\\src\\core\\video_composer.py'> does not have the attribute 'AudioFileClip'[0m
[31m[1m__________ TestCompleteWorkflows.test_full_podcast_creation_workflow __________[0m
[1m[31mtests\e2e\test_complete_workflows.py[0m:121: in test_full_podcast_creation_workflow
    [94massert[39;49;00m parsed[[33m'[39;49;00m[33mtitle[39;49;00m[33m'[39;49;00m] == [33m"[39;49;00m[33mMy Test Podcast[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   KeyError: 'title'[0m
[31m[1m____________ TestCompleteWorkflows.test_multiple_podcasts_workflow ____________[0m
[1m[31mtests\e2e\test_complete_workflows.py[0m:171: in test_multiple_podcasts_workflow
    [33m'[39;49;00m[33mtitle[39;49;00m[33m'[39;49;00m: parsed[[33m'[39;49;00m[33mtitle[39;49;00m[33m'[39;49;00m],[90m[39;49;00m
[1m[31mE   KeyError: 'title'[0m
[31m[1m___________ TestErrorRecoveryWorkflows.test_invalid_script_handling ___________[0m
[1m[31mtests\e2e\test_complete_workflows.py[0m:199: in test_invalid_script_handling
    [94massert[39;49;00m result[[33m'[39;49;00m[33mtitle[39;49;00m[33m'[39;49;00m] == [33m"[39;49;00m[33mUntitled Podcast[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   KeyError: 'title'[0m
[31m[1m_______ TestConfigurationWorkflows.test_different_resolutions_workflow ________[0m
[1m[31mtests\e2e\test_complete_workflows.py[0m:319: in test_different_resolutions_workflow
    [94mwith[39;49;00m patch([33m'[39;49;00m[33msrc.core.video_composer.AudioFileClip[39;49;00m[33m'[39;49;00m, return_value=mock_audio):[90m[39;49;00m
[1m[31mC:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2544.0_x64__qbz5n2kfra8p0\Lib\unittest\mock.py[0m:1497: in __enter__
    original, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
[1m[31mC:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2544.0_x64__qbz5n2kfra8p0\Lib\unittest\mock.py[0m:1467: in get_original
    [94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.core.video_composer' from 'D:\\dev\\AI_Podcast_Creator\\src\\core\\video_composer.py'> does not have the attribute 'AudioFileClip'[0m
[33m============================== warnings summary ===============================[0m
venv\Lib\site-packages\pydub\utils.py:170
  D:\dev\AI_Podcast_Creator\venv\Lib\site-packages\pydub\utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
    warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform win32, python 3.13.9-final-0 -----------
Name                           Stmts   Miss  Cover   Missing
------------------------------------------------------------
src\cli\__init__.py                0      0   100%
src\cli\main.py                  320    320     0%   6-559
src\core\__init__.py               0      0   100%
src\core\audio_mixer.py           47     40    15%   21-24, 38-100, 115
src\core\audio_visualizer.py     184    184     0%   5-352
src\core\avatar_generator.py     280    260     7%   29-56, 60-98, 102-123, 127-136, 148-155, 159-282, 286-328, 332-441, 445-473, 477-516, 520-533
src\core\music_generator.py      108     92    15%   26-41, 45-79, 84, 89, 101-127, 131-185, 190-191, 196-197, 201-202
src\core\script_parser.py         40      3    92%   91-94
src\core\tts_engine.py           234    175    25%   41-53, 60-61, 65-104, 108-113, 117-124, 128, 132-160, 183-196, 216-223, 227-276, 280-319, 323-331, 336-337, 341-359, 363-383, 402-417
src\core\video_composer.py       139     84    40%   49, 53-55, 63-109, 114-116, 134-163, 189, 210, 213, 243-273, 277-334
src\gui\__init__.py                0      0   100%
src\gui\desktop_gui.py           184    184     0%   6-460
src\gui\web_interface.py         107    107     0%   6-452
src\models\__init__.py             0      0   100%
src\models\database.py            42     42     0%   5-81
src\utils\__init__.py              0      0   100%
src\utils\config.py               44     34    23%   25-37, 50-58, 77-86, 99-113
src\utils\gpu_utils.py           145     90    38%   51-56, 64-68, 73, 87-88, 92-114, 118-148, 152-158, 162-178, 182-189, 207, 212, 217, 222-246
------------------------------------------------------------
TOTAL                           1874   1615    14%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

[36m[1m=========================== short test summary info ===========================[0m
[31mFAILED[0m tests/e2e/test_complete_workflows.py::[1mTestCompleteWorkflows::test_audio_to_video_workflow[0m - AttributeError: <module 'src.core.video_composer' from 'D:\\dev\\AI_Podcast...
[31mFAILED[0m tests/e2e/test_complete_workflows.py::[1mTestCompleteWorkflows::test_full_podcast_creation_workflow[0m - KeyError: 'title'
[31mFAILED[0m tests/e2e/test_complete_workflows.py::[1mTestCompleteWorkflows::test_multiple_podcasts_workflow[0m - KeyError: 'title'
[31mFAILED[0m tests/e2e/test_complete_workflows.py::[1mTestErrorRecoveryWorkflows::test_invalid_script_handling[0m - KeyError: 'title'
[31mFAILED[0m tests/e2e/test_complete_workflows.py::[1mTestConfigurationWorkflows::test_different_resolutions_workflow[0m - AttributeError: <module 'src.core.video_composer' from 'D:\\dev\\AI_Podcast...
[31m!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 5 failures !!!!!!!!!!!!!!!!!!!!!!!!!![0m
[31m================== [31m[1m5 failed[0m, [32m10 passed[0m, [33m1 warning[0m[31m in 18.64s[0m[31m ===================[0m
